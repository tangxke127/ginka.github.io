<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="htmlparser2 The fast &amp; forgiving HTML&#x2F;XML parser. Installationnpm install htmlparser2  A live demo of htmlparser2 is available here. Ecosystem   Name Description    htmlparser2 Fast &amp; for">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2024/03/01/node_modules/htmlparser2/README/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="htmlparser2 The fast &amp; forgiving HTML&#x2F;XML parser. Installationnpm install htmlparser2  A live demo of htmlparser2 is available here. Ecosystem   Name Description    htmlparser2 Fast &amp; for">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://img.shields.io/npm/v/htmlparser2.svg?style=flat">
<meta property="og:image" content="https://img.shields.io/npm/dm/htmlparser2.svg?style=flat">
<meta property="og:image" content="https://img.shields.io/github/workflow/status/fb55/htmlparser2/Node.js%20Test?label=tests&style=flat">
<meta property="og:image" content="http://img.shields.io/coveralls/fb55/htmlparser2.svg?style=flat">
<meta property="article:published_time" content="2024-03-01T15:18:14.687Z">
<meta property="article:modified_time" content="2024-03-01T15:18:14.718Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://img.shields.io/npm/v/htmlparser2.svg?style=flat">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-node_modules/htmlparser2/README" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/01/node_modules/htmlparser2/README/" class="article-date">
  <time class="dt-published" datetime="2024-03-01T15:18:14.687Z" itemprop="datePublished">2024-03-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="htmlparser2"><a href="#htmlparser2" class="headerlink" title="htmlparser2"></a>htmlparser2</h1><p><a target="_blank" rel="noopener" href="https://npmjs.org/package/htmlparser2"><img src="http://img.shields.io/npm/v/htmlparser2.svg?style=flat" alt="NPM version"></a><br><a target="_blank" rel="noopener" href="https://npmjs.org/package/htmlparser2"><img src="https://img.shields.io/npm/dm/htmlparser2.svg?style=flat" alt="Downloads"></a><br><a target="_blank" rel="noopener" href="https://github.com/fb55/htmlparser2/actions?query=workflow:%22Node.js+Test%22"><img src="https://img.shields.io/github/workflow/status/fb55/htmlparser2/Node.js%20Test?label=tests&style=flat" alt="Build Status"></a><br><a target="_blank" rel="noopener" href="https://coveralls.io/r/fb55/htmlparser2"><img src="http://img.shields.io/coveralls/fb55/htmlparser2.svg?style=flat" alt="Coverage"></a></p>
<p>The fast &amp; forgiving HTML&#x2F;XML parser.</p>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><pre><code>npm install htmlparser2
</code></pre>
<p>A live demo of <code>htmlparser2</code> is available <a target="_blank" rel="noopener" href="https://astexplorer.net/#/2AmVrGuGVJ">here</a>.</p>
<h2 id="Ecosystem"><a href="#Ecosystem" class="headerlink" title="Ecosystem"></a>Ecosystem</h2><table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a target="_blank" rel="noopener" href="https://github.com/fb55/htmlparser2">htmlparser2</a></td>
<td>Fast &amp; forgiving HTML&#x2F;XML parser</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/fb55/domhandler">domhandler</a></td>
<td>Handler for htmlparser2 that turns documents into a DOM</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/fb55/domutils">domutils</a></td>
<td>Utilities for working with domhandler’s DOM</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/fb55/css-select">css-select</a></td>
<td>CSS selector engine, compatible with domhandler’s DOM</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/cheeriojs/cheerio">cheerio</a></td>
<td>The jQuery API for domhandler’s DOM</td>
</tr>
<tr>
<td><a target="_blank" rel="noopener" href="https://github.com/cheeriojs/dom-serializer">dom-serializer</a></td>
<td>Serializer for domhandler’s DOM</td>
</tr>
</tbody></table>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p><code>htmlparser2</code> itself provides a callback interface that allows consumption of documents with minimal allocations.<br>For a more ergonomic experience, read <a href="#getting-a-dom">Getting a DOM</a> below.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> htmlparser2 = <span class="built_in">require</span>(<span class="string">&quot;htmlparser2&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> parser = <span class="keyword">new</span> htmlparser2.<span class="title class_">Parser</span>(&#123;</span><br><span class="line">    <span class="title function_">onopentag</span>(<span class="params">name, attributes</span>) &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * This fires when a new tag is opened.</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * If you don&#x27;t need an aggregated `attributes` object,</span></span><br><span class="line"><span class="comment">         * have a look at the `onopentagname` and `onattribute` events.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (name === <span class="string">&quot;script&quot;</span> &amp;&amp; attributes.<span class="property">type</span> === <span class="string">&quot;text/javascript&quot;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;JS! Hooray!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">ontext</span>(<span class="params">text</span>) &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * Fires whenever a section of text was processed.</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * Note that this can fire at any point within text and you might</span></span><br><span class="line"><span class="comment">         * have to stich together multiple pieces.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;--&gt;&quot;</span>, text);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">onclosetag</span>(<span class="params">tagname</span>) &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * Fires when a tag is closed.</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">         * You can rely on this event only firing when you have received an</span></span><br><span class="line"><span class="comment">         * equivalent opening tag before. Closing tags without corresponding</span></span><br><span class="line"><span class="comment">         * opening tags will be ignored.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (tagname === <span class="string">&quot;script&quot;</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;That&#x27;s it?!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">parser.<span class="title function_">write</span>(</span><br><span class="line">    <span class="string">&quot;Xyz &lt;script type=&#x27;text/javascript&#x27;&gt;const foo = &#x27;&lt;&lt;bar&gt;&gt;&#x27;;&lt;/ script&gt;&quot;</span></span><br><span class="line">);</span><br><span class="line">parser.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure>

<p>Output (with multiple text events combined):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--&gt; Xyz</span><br><span class="line">JS! Hooray!</span><br><span class="line">--&gt; const foo = &#x27;&lt;&lt;bar&gt;&gt;&#x27;;</span><br><span class="line">That&#x27;s it?!</span><br></pre></td></tr></table></figure>

<p>This example only shows three of the possible events.<br>Read more about the parser, its events and options in the <a target="_blank" rel="noopener" href="https://github.com/fb55/htmlparser2/wiki/Parser-options">wiki</a>.</p>
<h3 id="Usage-with-streams"><a href="#Usage-with-streams" class="headerlink" title="Usage with streams"></a>Usage with streams</h3><p>While the <code>Parser</code> interface closely resembles Node.js streams, it’s not a 100% match.<br>Use the <code>WritableStream</code> interface to process a streaming input:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">WritableStream</span> &#125; = <span class="built_in">require</span>(<span class="string">&quot;htmlparser2/lib/WritableStream&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> parserStream = <span class="keyword">new</span> <span class="title class_">WritableStream</span>(&#123;</span><br><span class="line">    <span class="title function_">ontext</span>(<span class="params">text</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Streaming:&quot;</span>, text);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> htmlStream = fs.<span class="title function_">createReadStream</span>(<span class="string">&quot;./my-file.html&quot;</span>);</span><br><span class="line">htmlStream.<span class="title function_">pipe</span>(parserStream).<span class="title function_">on</span>(<span class="string">&quot;finish&quot;</span>, <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;done&quot;</span>));</span><br></pre></td></tr></table></figure>

<h2 id="Getting-a-DOM"><a href="#Getting-a-DOM" class="headerlink" title="Getting a DOM"></a>Getting a DOM</h2><p>The <code>DomHandler</code> produces a DOM (document object model) that can be manipulated using the <a target="_blank" rel="noopener" href="https://github.com/fb55/DomUtils"><code>DomUtils</code></a> helper.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> htmlparser2 = <span class="built_in">require</span>(<span class="string">&quot;htmlparser2&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dom = htmlparser2.<span class="title function_">parseDocument</span>(htmlString);</span><br></pre></td></tr></table></figure>

<p>The <code>DomHandler</code>, while still bundled with this module, was moved to its <a target="_blank" rel="noopener" href="https://github.com/fb55/domhandler">own module</a>.<br>Have a look at that for further information.</p>
<h2 id="Parsing-RSS-RDF-Atom-Feeds"><a href="#Parsing-RSS-RDF-Atom-Feeds" class="headerlink" title="Parsing RSS&#x2F;RDF&#x2F;Atom Feeds"></a>Parsing RSS&#x2F;RDF&#x2F;Atom Feeds</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> feed = htmlparser2.<span class="title function_">parseFeed</span>(content, options);</span><br></pre></td></tr></table></figure>

<p>Note: While the provided feed handler works for most feeds,<br>you might want to use <a target="_blank" rel="noopener" href="https://github.com/danmactough/node-feedparser">danmactough&#x2F;node-feedparser</a>, which is much better tested and actively maintained.</p>
<h2 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h2><p>After having some artificial benchmarks for some time, <strong>@AndreasMadsen</strong> published his <a target="_blank" rel="noopener" href="https://github.com/AndreasMadsen/htmlparser-benchmark"><code>htmlparser-benchmark</code></a>, which benchmarks HTML parses based on real-world websites.</p>
<p>At the time of writing, the latest versions of all supported parsers show the following performance characteristics on GitHub Actions (sourced from <a target="_blank" rel="noopener" href="https://github.com/AndreasMadsen/htmlparser-benchmark/blob/e78cd8fc6c2adac08deedd4f274c33537451186b/stats.txt">here</a>):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">htmlparser2        : 2.17215 ms/file ± 3.81587</span><br><span class="line">node-html-parser   : 2.35983 ms/file ± 1.54487</span><br><span class="line">html5parser        : 2.43468 ms/file ± 2.81501</span><br><span class="line">neutron-html5parser: 2.61356 ms/file ± 1.70324</span><br><span class="line">htmlparser2-dom    : 3.09034 ms/file ± 4.77033</span><br><span class="line">html-dom-parser    : 3.56804 ms/file ± 5.15621</span><br><span class="line">libxmljs           : 4.07490 ms/file ± 2.99869</span><br><span class="line">htmljs-parser      : 6.15812 ms/file ± 7.52497</span><br><span class="line">parse5             : 9.70406 ms/file ± 6.74872</span><br><span class="line">htmlparser         : 15.0596 ms/file ± 89.0826</span><br><span class="line">html-parser        : 28.6282 ms/file ± 22.6652</span><br><span class="line">saxes              : 45.7921 ms/file ± 128.691</span><br><span class="line">html5              : 120.844 ms/file ± 153.944</span><br></pre></td></tr></table></figure>

<h2 id="How-does-this-module-differ-from-node-htmlparser"><a href="#How-does-this-module-differ-from-node-htmlparser" class="headerlink" title="How does this module differ from node-htmlparser?"></a>How does this module differ from <a target="_blank" rel="noopener" href="https://github.com/tautologistics/node-htmlparser">node-htmlparser</a>?</h2><p>In 2011, this module started as a fork of the <code>htmlparser</code> module.<br><code>htmlparser2</code> was rewritten multiple times and, while it maintains an API that’s mostly compatible with <code>htmlparser</code> in most cases, the projects don’t share any code anymore.</p>
<p>The parser now provides a callback interface inspired by <a target="_blank" rel="noopener" href="https://github.com/isaacs/sax-js">sax.js</a> (originally targeted at <a target="_blank" rel="noopener" href="https://github.com/fb55/readabilitysax">readabilitySAX</a>).<br>As a result, old handlers won’t work anymore.</p>
<p>The <code>DefaultHandler</code> and the <code>RssHandler</code> were renamed to clarify their purpose (to <code>DomHandler</code> and <code>FeedHandler</code>). The old names are still available when requiring <code>htmlparser2</code>, your code should work as expected.</p>
<h2 id="Security-contact-information"><a href="#Security-contact-information" class="headerlink" title="Security contact information"></a>Security contact information</h2><p>To report a security vulnerability, please use the <a target="_blank" rel="noopener" href="https://tidelift.com/security">Tidelift security contact</a>.<br>Tidelift will coordinate the fix and disclosure.</p>
<h2 id="htmlparser2-for-enterprise"><a href="#htmlparser2-for-enterprise" class="headerlink" title="htmlparser2 for enterprise"></a><code>htmlparser2</code> for enterprise</h2><p>Available as part of the Tidelift Subscription</p>
<p>The maintainers of <code>htmlparser2</code> and thousands of other packages are working with Tidelift to deliver commercial support and maintenance for the open source dependencies you use to build your applications. Save time, reduce risk, and improve code health, while paying the maintainers of the exact dependencies you use. <a target="_blank" rel="noopener" href="https://tidelift.com/subscription/pkg/npm-htmlparser2?utm_source=npm-htmlparser2&utm_medium=referral&utm_campaign=enterprise&utm_term=repo">Learn more.</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/03/01/node_modules/htmlparser2/README/" data-id="clt8trqrn002658s4d12n8g86" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/03/01/node_modules/luxon/src/datetime/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2024/03/01/node_modules/hexo-util/lib/gravatar/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/03/01/package/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/03/01/package-lock/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/03/01/node_modules/highlight.js/VERSION_11_UPGRADE/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/03/01/node_modules/highlight.js/VERSION_10_UPGRADE/">(no title)</a>
          </li>
        
          <li>
            <a href="/2024/03/01/node_modules/highlight.js/SUPPORTED_LANGUAGES/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>